# Workflow Transformer Testing Scripts

This directory contains scripts for testing and analyzing the workflow transformer implementation.

## Overview

The workflow transformer is responsible for converting n8n workflow nodes to provider-specific implementations (e.g., Google-specific implementations). These scripts help test and analyze the transformer to identify potential issues or duplicate implementations.

## Scripts

### 1. `test_workflow_transformer.py`

This script takes an n8n workflow JSON file as input, transforms it using the GoogleWorkflowTransformer, and outputs the transformed workflow to a file.

#### Usage

```bash
python test_workflow_transformer.py --input <input_file> --output <output_file> [--verbose]
```

#### Example

```bash
python test_workflow_transformer.py --input tests/fixtures/test_workflow.json --output transformed_workflow.json --verbose
```

#### Arguments

- `--input`, `-i`: Path to the input workflow JSON file (required)
- `--output`, `-o`: Path to save the transformed workflow JSON file (required)
- `--verbose`, `-v`: Print verbose output (optional)

### 2. `analyze_workflow_transformer.py`

This script analyzes the workflow transformer implementation to identify potential issues or duplicate implementations.

#### Usage

```bash
python analyze_workflow_transformer.py --input <input_file> [--output <output_file>] [--verbose]
```

#### Example

```bash
python analyze_workflow_transformer.py --input tests/fixtures/test_workflow.json --output analysis_report.json --verbose
```

#### Arguments

- `--input`, `-i`: Path to the input workflow JSON file (required)
- `--output`, `-o`: Path to save the analysis report JSON file (optional)
- `--verbose`, `-v`: Print verbose output (optional)

## Analysis Report

The analysis report generated by `analyze_workflow_transformer.py` includes:

1. **Similar Methods**: Methods in the transformer class that might be similar, which could indicate potential code duplication.
2. **Potential Duplicates**: Potential duplicate implementations of workflow transformers in the codebase.
3. **Node Analysis**: Analysis of how nodes are transformed, including:
   - Original node types
   - Transformed node types
   - Potential issues (e.g., untransformed nodes, lost connections)

## Example Workflow

You can use the sample workflow in `tests/fixtures/test_workflow.json` as a starting point for testing.

## Troubleshooting

If you encounter any issues:

1. Make sure the scripts are executable (`chmod +x scripts/*.py`)
2. Check that the input workflow JSON file exists and is valid
3. Ensure the project structure is correct (scripts should be run from the project root)
4. Check the logs for error messages

## Contributing

If you find issues with the workflow transformer or have suggestions for improvements, please create an issue or pull request.
